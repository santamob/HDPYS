@using PYS.Web.Services
@using PYS.Core.Application.Features.UserFeature.Dtos
@model List<UserDto>
@{
    string localizationUpdate = @localization.GetKey("Update").Value;
    string localizationEnable = @localization.GetKey("Enable").Value;
    string localizationDisable = @localization.GetKey("Disable").Value;
    string localizationActive = @localization.GetKey("Active").Value;
    string localizationPassive = @localization.GetKey("Passive").Value;
}
<h4 class="fw-bold py-3 mb-4">
    <span class="text-muted fw-light">@localization.GetKey("UserManagement").Value /</span> @localization.GetKey("User").Value
</h4>

<div class="card">
    <div class="card-datatable table-responsive m-2">
        <div class="card-header flex-column flex-md-row">
            <div class="dt-action-buttons text-end pt-3 pt-md-0">
                <div class="dt-buttons">
                    <a class="btn btn-sm btn-outline-primary mb-3" asp-controller="User" asp-action="Create">
                        @localization.GetKey("User").Value @localization.GetKey("Create").Value <i class="bx bx-plus"></i>
                    </a>
                </div>
            </div>
        </div>
        <table class="datatables-basic table border-top dataTable no-footer dtr-column" id="dataTable">
            <thead>
                <tr>
                    <th>@localization.GetKey("Process").Value</th>
                    <th>@localization.GetKey("RegistrationNumber").Value</th>
                    <th>@localization.GetKey("Name").Value</th>
                    <th>@localization.GetKey("Surname").Value</th>
                    <th>@localization.GetKey("Email").Value</th>
                    <th>@localization.GetKey("Unit").Value</th>
                    <th>@localization.GetKey("Position").Value</th>
                    <th>@localization.GetKey("Status").Value</th>
                </tr>
            </thead>

            <tbody class="table-border-bottom-0">
                @foreach (var user in Model)
                {
                    string statu = user.IsActive ? localizationActive : @localizationPassive;
                    string statuClass = user.IsActive ? "success" : "warning";
                    string statuUpdateButton = user.IsActive ? localizationDisable : localizationEnable;
                    string statuUpdateClass = user.IsActive ? "user-minus" : "user-plus";
                    bool toggledStatus = !user.IsActive;


                    <tr data-id="@user.Id">
                        <td>
                            <div class="dropdown">
                                <button type="button" class="btn p-0 dropdown-toggle hide-arrow" data-bs-toggle="dropdown"><i class="bx bx-dots-vertical-rounded"></i></button>
                                <div class="dropdown-menu">
                                    <a class="dropdown-item" asp-controller="User" asp-action="Update" asp-route-id="@user.Id"><i class="bx bx-edit-alt me-1"></i> @localizationUpdate</a>
                                    <a class="dropdown-item" asp-controller="User" asp-action="UpdateStatu" asp-route-id="@user.Id" asp-route-isActive="@toggledStatus"><i class="bx bx-@statuUpdateClass me-1"></i> @statuUpdateButton</a>
                                </div>
                            </div>
                        </td>
                        <td>@user.RegistrationNumber</td>
                        <td>@user.FirstName</td>
                        <td>@user.LastName</td>
                        <td>@user.Email</td>
                        <td>@user.Unit</td>
                        <td>@user.Position</td>
                        <td>
                            <span class="badge bg-label-@statuClass me-1">@statu</span>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>